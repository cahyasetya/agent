#!/bin/bash

# Store the current directory
PROJECT_ROOT=$(git rev-parse --show-toplevel)

# Change to the project root
cd "$PROJECT_ROOT" || exit 1

echo "Running linting checks..."

# Run make lint and capture the exit code
make lint
LINT_EXIT_CODE=$?

# If the linting failed, prevent the commit
if [ $LINT_EXIT_CODE -ne 0 ]; then
  echo "❌ Linting failed. Please fix the issues before committing."
  exit 1
fi

echo "✅ All checks passed! Proceeding with commit..."
exit 0
